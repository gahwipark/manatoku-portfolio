<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.manatoku.dao.FriendsMapper">
   
	<!-- SELECT -->
	
  <select id="getFriendsList" resultType="com.manatoku.model.Member">
	SELECT m.ucode, m.id, m.name, m.icon
	FROM friends f JOIN member m
	ON (CASE WHEN f.sender=#{ucode} THEN f.receiver ELSE f.sender END)=m.ucode
	WHERE (f.sender=#{ucode} OR f.receiver=#{ucode}) AND f.status='ACCEPT'
  </select>

</mapper>